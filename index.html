<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify - Listen music</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/006e6c6a4b.js" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Navbar -->
    <nav>
        <ul>
            <li class="brand"> <img src="./assets/logo.png" alt="Spotify"> Spotify</li>
            <li>Home</li>
            <li>About</li>
        </ul>
    </nav>

    <div class="container">
        <div class="songList">
            <h1>Best of all time songs</h1>
            <div class="songItemContainer">

                <div class="songItem">
                    <img src="./assets/covers/1.jpg" alt="1">
                    <span class="songName">Maan Meri Jaan</span>
                    <span class="songlistplay">
                        <span class="timeStamp">05:34
                            <i id="0" class="playMiniSong fa-regular fa-circle-play"></i>
                        </span>
                    </span>
                </div>
                <div class="songItem">
                    <img src="./assets/covers/1.jpg" alt="2">
                    <span class="songName">Maan Meri Jaan</span>
                    <span class="songlistplay">
                        <span class="timeStamp">05:34
                            <i id="1" class="playMiniSong fa-regular fa-circle-play"></i>
                        </span>
                    </span>
                </div>
                <div class="songItem">
                    <img src="./assets/covers/1.jpg" alt="3">
                    <span class="songName">Maan Meri Jaan</span>
                    <span class="songlistplay">
                        <span class="timeStamp">05:34
                            <i id="2" class="playMiniSong fa-regular fa-circle-play"></i>
                        </span>
                    </span>
                </div>
                <div class="songItem">
                    <img src="./assets/covers/1.jpg" alt="4">
                    <span class="songName">Maan Meri Jaan</span>
                    <span class="songlistplay">
                        <span class="timeStamp">05:34
                            <i id="3" class="playMiniSong fa-regular fa-circle-play"></i>
                        </span>
                    </span>
                </div>
                <div class="songItem">
                    <img src="./assets/covers/1.jpg" alt="5">
                    <span class="songName">Maan Meri Jaan</span>
                    <span class="songlistplay">
                        <span class="timeStamp">05:34
                            <i id="4" class="playMiniSong fa-regular fa-circle-play"></i>
                        </span>
                    </span>
                </div>
                <div class="songItem">
                    <img src="./assets/covers/1.jpg" alt="6">
                    <span class="songName">Maan Meri Jaan</span>
                    <span class="songlistplay">
                        <span class="timeStamp">05:34
                            <i id="5" class="playMiniSong fa-regular fa-circle-play"></i>
                        </span>
                    </span>
                </div>
                <div class="songItem">
                    <img src="./assets/covers/1.jpg" alt="7">
                    <span class="songName">Maan Meri Jaan</span>
                    <span class="songlistplay">
                        <span class="timeStamp">05:34
                            <i id="6" class="playMiniSong fa-regular fa-circle-play"></i>
                        </span>
                    </span>
                </div>
            </div>
        </div>
        <div class="songBanner"></div>
    </div>

    <div class="bottom">
        <input type="range" name="range" id="musicBar" min="0" max="100">
        <div class="icons">
            <!-- fontawesome icon -->
            <!-- <i id="1" class="playMiniSong fa-duotone fa-play"></i> -->
            <i id="iconb" class="fa-solid fa-backward-step"></i>
            <i  class="fa-regular fa-circle-play" id="masterPlay"></i>
            <!-- <i id="1" class="playMiniSong fa-solid fa-play"></i> -->
            <i id="iconf" class="fa-solid fa-forward-step"></i>
        </div>
        <div class="songInfo">
            <img src="./assets/playing.gif" width="42px" alt="playing" id="gif">
            <span id="masterSongName">Maan Meri Jaan</span>
        </div>
    </div>

    <!-- java script -->
    <!-- <script src="script.js"></script> -->
    <script>
        console.log('It is my js for spotify')

let songIndex = 0;
let audioElement = new Audio('./assets/songs/Maan Meri Jaan.mp3');
let myProgressBar = document.getElementById('musicBar');
let masterSongName = document.getElementById('masterSongName');
let masterPlay = document.getElementById('masterPlay');
let gif = document.getElementById('gif');
let songItems = Array.from(document.getElementsByClassName('songItem'));

let songs = [
    { songName: 'Chhod Diya', filePath: './assets/songs/Chhod Diya.mp3', coverPath: './assets/covers/1.jpg' },
    { songName: 'Kuch Is Tarah', filePath: './assets/songs/Kuch Is Tarah.mp3', coverPath: './assets/covers/2.jpg' },
    { songName: 'Raatan nu das menu neend kyu na aave', filePath: './assets/songs/Raatan nu das menu neend kyu na aave', coverPath: './assets/covers/3.jpg' },
    { songName: 'Maan Meri Jaan', filePath: './assets/songs/Maan Meri Jaan', coverPath: './assets/covers/4.jpg' },
    { songName: 'Chill night - albert', filePath: './assets/songs/1', coverPath: './assets/covers/5.jpg' },
    { songName: 'Enjoy the vibe -justin', filePath: './songs/2', coverPath: './assets/covers/6.jpg' },
    { songName: 'Love me by justin', filePath: './assets/songs/3', coverPath: './assets/covers/7.jpg' },
]


songItems.forEach((element, i) => {

    element.getElementsByTagName('img')[0].src = songs[i].coverPath;
    element.getElementsByClassName('songName')[0].innerText = songs[i].songName;
});


// Handle the play pause

masterPlay.addEventListener('click', () => {
    if (audioElement.paused || audioElement.currentTime <= 0) {
        audioElement.play();
        masterPlay.classList.remove('fa-circle-play');
        masterPlay.classList.add('fa-circle-pause');
        gif.style.opacity = 1;

    } else {
        audioElement.pause();
        masterPlay.classList.remove('fa-circle-pause');
        masterPlay.classList.add('fa-circle-play');
        gif.style.opacity = 0;
    }
})

// update music bar
audioElement.addEventListener('timeupdate', () => {
    console.log('music bar updated');
    progress = parseInt((audioElement.currentTime / audioElement.duration) * 100);
    // console.log(progress);
    myProgressBar.value = progress

})

myProgressBar.addEventListener('change', () => {
    audioElement.currentTime = (myProgressBar.value * audioElement.duration) / 100;
})

const makeAllPlay = () => {
    Array.from(document.getElementsByClassName('playMiniSong')).forEach((element) => {
        element.classList.remove('fa-circle-pause');
        element.classList.add('fa-circle-play');
    })
}

// mini song player 
Array.from(document.getElementsByClassName('playMiniSong')).forEach((element) => {
    element.addEventListener('click', (e) => {
        makeAllPlay();
        songIndex = parseInt(e.target.id);
        // index = document.getElementById(e.target.id)
        // console.log(index);
        e.target.classList.remove('fa-circle-play');
        e.target.classList.add('fa-circle-pause');
        audioElement.src = `./assets/songs/${songIndex}.mp3`;
        audioElement.currentTime = 0;
        audioElement.play();
        masterPlay.classList.remove('fa-circle-play');
        masterPlay.classList.add('fa-circle-pause');
        masterSongName.innerText = songs[songIndex].songName;
        gif.style.opacity = 1;
        
    })
})

// forward and backward

document.getElementById('iconf').addEventListener('click', (e) => {
    if (songIndex >= 7) {
        songIndex = 0;
    } else {
        songIndex += 1;
    }
    makeAllPlay();
    audioElement.src = `./songs/${songIndex}.mp3`;
    audioElement.currentTime = 0;
    audioElement.play();
    masterPlay.classList.remove('fa-circle-play');
    masterPlay.classList.add('fa-circle-pause');
    masterSongName.innerText = songs[songIndex].songName;
    gif.style.opacity = 1;

});

document.getElementById('iconb').addEventListener('click', (e) => {
    if (songIndex <= 0) {
        songIndex = 0;
    } else {
        songIndex -= 1;
        
    }
    audioElement.src = `./songs/${songIndex}.mp3`;
    audioElement.currentTime = 0;
    audioElement.play();
    masterPlay.classList.remove('fa-circle-play');
    masterPlay.classList.add('fa-circle-pause');
    masterSongName.innerText = songs[songIndex].songName;
    gif.style.opacity = 1;

});
    </script>
</body>
</html>